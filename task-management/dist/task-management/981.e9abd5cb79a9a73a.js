"use strict";(self.webpackChunktask_management=self.webpackChunktask_management||[]).push([[981],{5981:(G,x,a)=>{a.r(x),a.d(x,{TeamModule:()=>L});var p=a(9808),v=a(9826),d=a(338),e=a(5e3),u=a(7957),f=a(6042),z=a(2683),C=a(2643),_=a(1894),h=a(4546),r=a(2382);function y(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",5)(1,"button",6),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.handleOk())}),e._uU(2," X\xf3a "),e.qZA(),e.TgZ(3,"button",7),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.handleCancel())}),e._uU(4,"H\u1ee7y"),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(1),e.Q6J("nzLoading",t.isConfirmLoading)}}let b=(()=>{class o{constructor(t){this.modalRef=t,this.isVisible=!1,this.isConfirmLoading=!1}ngOnInit(){this.data="B\u1ea1n c\xf3 ch\u1eafc mu\u1ed1n x\xf3a ????"}handleOk(){this.isConfirmLoading=!0,this.modalRef.close(!0)}handleCancel(){this.isVisible=!1,this.modalRef.close()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(u.Lf))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-delete"]],inputs:{title:"title",data:"data"},decls:7,vars:1,consts:[[1,"modal-content"],["nz-form",""],[1,"flex","flex-row"],["nz-col","",1,"text-center"],["class","modal-footer",4,"nzModalFooter"],[1,"modal-footer"],["nz-button","","nzType","primary",3,"nzLoading","click"],["nz-button","","nzType","default",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"form",1)(2,"div",2)(3,"div",3)(4,"p"),e._uU(5),e.qZA()()()(),e.YNc(6,y,5,1,"div",4),e.qZA()),2&t&&(e.xp6(5),e.Oqu(n.data))},dependencies:[f.ix,z.w,C.dQ,u.Uh,_.t3,h.Lr,r._Y,r.JL,r.F],styles:[".modal-content[_ngcontent-%COMP%]{border:none}.modal-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.modal-custom[_ngcontent-%COMP%]   .ant-modal-title[_ngcontent-%COMP%]{display:flex;justify-content:center;font-weight:700;text-transform:uppercase}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:center}"]}),o})();var Z=a(4630),g=a(1047);function E(o,l){1&o&&(e.ynx(0),e._uU(1,"T\xean c\u1ea7n t\u1ed1i thi\u1ec3u 5 k\xfd t\u1ef1"),e.BQk())}function S(o,l){1&o&&(e.ynx(0),e._uU(1,"M\u1ee5c n\xe0y kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng"),e.BQk())}function A(o,l){if(1&o&&(e.YNc(0,E,2,0,"ng-container",13),e.YNc(1,S,2,0,"ng-container",13)),2&o){const t=l.$implicit;e.Q6J("ngIf",t.hasError("minlength")),e.xp6(1),e.Q6J("ngIf",t.hasError("required"))}}function k(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",14)(1,"button",15),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.handleOk())}),e._uU(2," L\u01b0u "),e.qZA(),e.TgZ(3,"button",16),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.handleCancel())}),e._uU(4,"H\u1ee7y"),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(1),e.Q6J("hidden","view"===t.mode)("disabled",!t.formValidation.valid)("nzLoading",t.isConfirmLoading)}}let T=(()=>{class o{constructor(t,n,i){this.fb=t,this.teamData=n,this.modelRef=i,this.isConfirmLoading=!1,this.checked=!1,this.title="",this.isVisible=!1}get teamName(){return this.formValidation.get("teamName")}get description(){return this.formValidation.get("description")}ngOnInit(){console.log(this.id),this.formValidation=this.fb.group({teamName:["",[r.kI.required,r.kI.minLength(5)]],description:["",[]]}),this.mode!=d.o.CREATE&&this.id&&this.getById(this.id)}changeChecked(){this.checked=!this.checked}getById(t){this.teamData.getById(t).subscribe({next:n=>{console.log(n),this.formValidation.setValue({teamName:n.data.teamName,description:n.data.description})}})}handleOk(){this.isConfirmLoading=!0;const t=this.formValidation.value;this.mode===d.o.CREATE?this.teamData.save(t).subscribe({next:n=>{console.log(n),n&&(this.isVisible=!1,this.isConfirmLoading=!1,this.modelRef.close(n))},error:n=>{console.log(n)},complete:()=>{console.log("done")}}):this.mode===d.o.UPDATE&&(t.id=this.id,this.teamData.update(this.id,t).subscribe({next:n=>{console.log(n),n&&(this.isVisible=!1,this.isConfirmLoading=!1,this.modelRef.close(n))},error:n=>{console.log(n)},complete:()=>{console.log("done")}}))}handleCancel(){this.isVisible=!1,this.modelRef.close()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(r.qu),e.Y36(Z.d),e.Y36(u.Lf))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-team-form"]],inputs:{mode:"mode",title:"title",id:"id"},decls:22,vars:16,consts:[[1,"wrapper"],[1,"modal-content"],["nz-form","","method","POST",2,"width","100%",3,"formGroup"],["nz-row","",1,"d-flex","flex-row",3,"nzGutter"],["nz-col","",3,"nzSpan"],["nz-row","",3,"nzGutter"],[2,"color","red"],["nz-col","",3,"nzSpan","nzErrorTip"],["nz-input","","placeholder","T\xean Nh\xf3m","formControlName","teamName","name","teamName","required","",3,"readonly","ngClass"],["Name",""],[3,"nzSpan"],["nz-input","","rows","3","Placeholder","Description","formControlName","description","name","description",3,"readonly","ngClass"],["class","d-flex justify-content-center",4,"nzModalFooter"],[4,"ngIf"],[1,"d-flex","justify-content-center"],["nz-button","","nzType","primary",3,"hidden","disabled","nzLoading","click"],["nz-button","","nzType","default",3,"click"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"form",2)(3,"div",3)(4,"div",4)(5,"nz-form-item",5)(6,"nz-form-label",4),e._uU(7," T\xean Nh\xf3m "),e.TgZ(8,"span",6),e._uU(9,"*"),e.qZA()(),e.TgZ(10,"nz-form-control",7),e._UZ(11,"input",8),e.YNc(12,A,2,2,"ng-template",null,9,e.W1O),e.qZA()()()(),e.TgZ(14,"div",3)(15,"div",4)(16,"nz-form-item",5)(17,"nz-form-label",10),e._uU(18," Mi\xeau t\u1ea3 "),e.qZA(),e.TgZ(19,"nz-form-control",10),e._UZ(20,"textarea",11),e.qZA()()()()()()(),e.YNc(21,k,5,3,"div",12)),2&t){const i=e.MAs(13);e.xp6(2),e.Q6J("formGroup",n.formValidation),e.xp6(1),e.Q6J("nzGutter",8),e.xp6(1),e.Q6J("nzSpan",24),e.xp6(1),e.Q6J("nzGutter",2),e.xp6(1),e.Q6J("nzSpan",3),e.xp6(4),e.Q6J("nzSpan",21)("nzErrorTip",i),e.xp6(1),e.Q6J("readonly","view"===n.mode)("ngClass","view"===n.mode?"ban":""),e.xp6(3),e.Q6J("nzGutter",8),e.xp6(1),e.Q6J("nzSpan",24),e.xp6(1),e.Q6J("nzGutter",2),e.xp6(1),e.Q6J("nzSpan",3),e.xp6(2),e.Q6J("nzSpan",21),e.xp6(1),e.Q6J("readonly","view"===n.mode)("ngClass","view"===n.mode?"ban":"")}},dependencies:[p.mk,p.O5,f.ix,z.w,C.dQ,g.Zp,u.Uh,_.t3,_.SK,h.Lr,h.Nx,h.iK,h.Fd,r._Y,r.Fj,r.JJ,r.JL,r.Q7,r.sg,r.u],styles:[".ban[_ngcontent-%COMP%]{cursor:no-drop}.wrapper[_ngcontent-%COMP%]{width:800px;height:calc(100% - 144px);border-radius:3px}.ant-modal-title[_ngcontent-%COMP%]{display:flex;justify-content:center;font-weight:700;text-transform:uppercase}.modal-content[_ngcontent-%COMP%]{display:grid;grid-template-rows:none;border:none}.invalid-data[_ngcontent-%COMP%]{border:1px solid red}"]}),o})();var N=a(5278),D=a(5017),c=a(939),M=a(5905),J=a(1711),F=a(6114);function P(o,l){1&o&&e._UZ(0,"span",21)}function O(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"tr")(1,"td",15)(2,"label",16),e.NdJ("ngModelChange",function(i){const m=e.CHM(t).index,Y=e.oxw();return e.KtG(Y.isChecked(i,m))}),e.qZA()(),e.TgZ(3,"td",15),e._uU(4),e.qZA(),e.TgZ(5,"td",15),e._uU(6),e.qZA(),e.TgZ(7,"td",22)(8,"button",23),e.NdJ("click",function(){const s=e.CHM(t).$implicit,m=e.oxw();return e.KtG(m.onView(s))}),e._UZ(9,"i",24),e.qZA(),e.TgZ(10,"button",23),e.NdJ("click",function(){const s=e.CHM(t).$implicit,m=e.oxw();return e.KtG(m.onUpdate(s))}),e._UZ(11,"i",25),e.qZA(),e.TgZ(12,"button",23),e.NdJ("click",function(){const s=e.CHM(t).$implicit,m=e.oxw();return e.KtG(m.onDelete(s.id))}),e._UZ(13,"i",26),e.qZA()()()}if(2&o){const t=l.$implicit,n=l.index;e.xp6(2),e.Q6J("ngModel",t.isChecked),e.xp6(2),e.hij(" ",n+1," "),e.xp6(2),e.hij(" ",t.teamName," ")}}function I(o,l){if(1&o&&e._uU(0),2&o){const t=e.oxw();e.hij("T\u1ed5ng s\u1ed1: ",t.totalElements,"")}}const U=[{path:"",component:(()=>{class o{constructor(t,n,i,s){this.teamData=t,this.modalService=n,this.notifyService=i,this.element=s,this.listId=[],this.searchField=["Name","Email","Advanced Filter"],this.pageNumber=1,this.pageSize=10,this.totalElements=0,this.checkedBoxAll=!1,this.FilterValue="",this.disableRoute=!1,this.isCollapse=!1,this.modalOptions={nzDuration:2e3}}ngOnInit(){this.getTeam(),console.log(this.listId)}isCollapsed(){this.isCollapse=!this.isCollapse}search(){const t=this.element.nativeElement.querySelector("#search");""===this.FilterValue?(console.log(this.FilterValue),this.txtSearch=`name.cn.${t.value},`):(console.log(this.FilterValue),this.txtSearch=`${this.FilterValue}.cn.${t.value},`,console.log(this.txtSearch)),this.getTeam()}getFilterValue(t){console.log(this.searchField[t]),this.FilterValue=this.searchField[t]}checkedAll(t){console.log(t),this.listData.forEach(n=>{if(n.isChecked=t,!0===n.isChecked&&-1===this.listId.indexOf(n.id))this.listId.push(n.id);else{if(!0===n.isChecked&&-1!==this.listId.indexOf(n.id))return;this.listId=[]}console.log(this.listId)})}isChecked(t,n){this.listData[n].isChecked=t,this.checkIntoArr(n),console.log(this.listId)}checkIntoArr(t){let n=this.listData[t];if(!0===n.isChecked&&-1===this.listId.indexOf(n.id))this.listId.push(n.id);else{let i=this.listId.indexOf(n.id);console.log(i),i>-1&&this.listId.splice(i,1)}}changePageSize(t){this.pageSize=t,this.getTeam()}changePageNumber(t){this.pageNumber=t,this.getTeam()}getTeam(){this.teamData.search(this.pageNumber,this.pageSize,this.txtSearch).subscribe({next:t=>{console.log(t),this.listData=t.pagingData.content,this.totalElements=t.pagingData.totalElements,this.totalPages=t.pagingData.totalPages},error:t=>{console.log(t)}})}onCreate(){this.modalService.create({nzTitle:"Th\xeam m\u1edbi nh\xf3m",nzClassName:"modal-custom",nzContent:T,nzWidth:"modal-custom",nzCentered:!0,nzMaskClosable:!1,nzComponentParams:{mode:d.o.CREATE,title:"Th\xeam m\u1edbi nh\xf3m"},nzDirection:"ltr"}).afterClose.subscribe({next:t=>{console.log(t),t&&(this.notifyService.success("Th\xe0nh c\xf4ng","Th\xeam m\u1edbi nh\xf3m",this.modalOptions),this.getTeam())},error:t=>{console.log(t)}})}onUpdate(t){this.modalService.create({nzTitle:"C\u1eadp nh\u1eadt nh\xf3m",nzClassName:"modal-custom",nzContent:T,nzWidth:"modal-custom",nzCentered:!0,nzMaskClosable:!1,nzComponentParams:{mode:d.o.UPDATE,id:t.id},nzDirection:"ltr"}).afterClose.subscribe({next:n=>{console.log(n),n&&this.notifyService.success("Th\xe0nh c\xf4ng","Ch\u1ec9nh s\u1eeda nh\xf3m",this.modalOptions),this.getTeam()},error:n=>{console.log(n)}})}onView(t){this.modalService.create({nzTitle:"Xem nh\xf3m",nzClassName:"modal-custom",nzContent:T,nzWidth:"modal-custom",nzCentered:!0,nzMaskClosable:!1,nzComponentParams:{mode:d.o.VIEW,title:"Xem nh\xf3m",id:t.id},nzDirection:"ltr"})}onDelete(t){this.modalService.create({nzTitle:"X\xf3a nh\xf3m",nzClassName:"modal-custom",nzContent:b,nzCentered:!0,nzMaskClosable:!1,nzDirection:"ltr"}).afterClose.subscribe({next:n=>{console.log(n),n&&this.teamData.deleteById(t).subscribe({next:i=>{i&&this.notifyService.success("Th\xe0nh c\xf4ng","X\xf3a nh\xf3m",this.modalOptions),this.getTeam()},error:i=>{console.log(i)},complete:()=>{}})},error:n=>{console.log(n)}})}onDeleteAll(t){this.modalService.create({nzTitle:"X\xf3a nhi\u1ec1u nh\xf3m",nzClassName:"modal-custom",nzContent:b,nzCentered:!0,nzMaskClosable:!1,nzDirection:"ltr"}).afterClose.subscribe({next:n=>{console.log(n),n&&this.teamData.deleteSelectedId(t).subscribe({next:i=>{i&&this.notifyService.success("Th\xe0nh c\xf4ng","X\xf3a nh\xf3m",this.modalOptions),this.getTeam()},error:i=>{console.log(i),console.log(t),console.log(this.listData)},complete:()=>{}})},error:n=>{console.log(n)}})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(Z.d),e.Y36(u.Sf),e.Y36(N.zb),e.Y36(e.SBq))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-team"]],decls:36,vars:11,consts:[[1,"member-wrapper"],[1,"container"],[1,"row"],[1,"tool",2,"width","100%","margin-top","1.5em"],[1,"search",3,"nzSuffix"],["id","search","type","text","nz-input","","placeholder","Nh\u1eadp t\u1eeb t\xecm ki\u1ebfm",3,"keyup.enter"],["suffixIconSearch",""],["nz-button","",1,"ml-auto","mr-2",3,"click"],["nz-button","","nzDanger","",1,"mr-2",3,"click"],["nz-button","",1,"d-flex","align-items-center","mr-2",3,"click"],["nz-icon","","nzType","filter","nzTheme","outline"],[1,"date-picker-custom","mt-3",3,"hidden"],[1,"mr-2",3,"nzSize"],[3,"nzSize"],["nzShowPagination","false",1,"table",2,"width","100%","margin-top","1.5em",3,"nzData"],["nzAlign","center"],["nz-checkbox","",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],[1,"paging"],["nzShowSizeChanger","",3,"nzPageIndex","nzTotal","nzPageSize","nzShowTotal","nzPageIndexChange","nzPageSizeChange"],["total",""],["nz-icon","","nzType","search"],[1,"d-flex","flex-row","justify-content-center"],["nz-button","","nzShape","circle",1,"d-flex","align-items-center","justify-content-center","mr-1",3,"click"],["nz-icon","","nzType","eye","nzTheme","outline"],["nz-icon","","nzType","edit","nzTheme","outline"],["nz-icon","","nzType","delete","nzTheme","outline"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"nz-input-group",4)(5,"input",5),e.NdJ("keyup.enter",function(){return n.search()}),e.qZA()(),e.YNc(6,P,1,0,"ng-template",null,6,e.W1O),e.TgZ(8,"button",7),e.NdJ("click",function(){return n.onCreate()}),e._uU(9," Th\xeam m\u1edbi nh\xf3m "),e.qZA(),e.TgZ(10,"button",8),e.NdJ("click",function(){return n.onDeleteAll(n.listId)}),e._uU(11," X\xf3a t\u1ea5t c\u1ea3 "),e.qZA(),e.TgZ(12,"button",9),e.NdJ("click",function(){return n.isCollapsed()}),e._UZ(13,"i",10),e.TgZ(14,"span"),e._uU(15,"B\u1ed9 l\u1ecdc"),e.qZA()()(),e.TgZ(16,"div",11),e._UZ(17,"nz-date-picker",12)(18,"nz-date-picker",13),e.qZA(),e.TgZ(19,"nz-table",14)(20,"thead")(21,"tr")(22,"th",15)(23,"label",16),e.NdJ("ngModelChange",function(s){return n.checkedAll(s)}),e.qZA()(),e.TgZ(24,"th",15),e._uU(25,"STT"),e.qZA(),e.TgZ(26,"th",15),e._uU(27,"T\xean Nh\xf3m"),e.qZA(),e.TgZ(28,"th",15),e._uU(29,"H\xe0nh \u0111\u1ed9ng"),e.qZA()()(),e.TgZ(30,"tbody"),e.YNc(31,O,14,3,"tr",17),e.qZA()(),e.TgZ(32,"div",18)(33,"nz-pagination",19),e.NdJ("nzPageIndexChange",function(s){return n.changePageNumber(s)})("nzPageSizeChange",function(s){return n.changePageSize(s)})("nzPageIndexChange",function(s){return n.pageNumber=s})("nzPageSizeChange",function(s){return n.pageSize=s}),e.qZA(),e.YNc(34,I,1,1,"ng-template",null,20,e.W1O),e.qZA()()()()),2&t){const i=e.MAs(7),s=e.MAs(35);e.xp6(4),e.Q6J("nzSuffix",i),e.xp6(12),e.Q6J("hidden",!n.isCollapse),e.xp6(1),e.Q6J("nzSize","default"),e.xp6(1),e.Q6J("nzSize","default"),e.xp6(1),e.Q6J("nzData",n.listData),e.xp6(4),e.Q6J("ngModel",n.checkedBoxAll),e.xp6(8),e.Q6J("ngForOf",n.listData),e.xp6(2),e.Q6J("nzPageIndex",n.pageNumber)("nzTotal",n.totalElements)("nzPageSize",n.pageSize)("nzShowTotal",s)}},dependencies:[p.sg,D.Ls,f.ix,z.w,C.dQ,c.N8,c.Uo,c._C,c.Om,c.p0,c.$Z,c.UX,M.uw,g.Zp,g.gB,g.ke,J.dE,F.Ie,r.JJ,r.On],styles:[".tool[_ngcontent-%COMP%]{display:flex}.tool[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]{width:50%}.paging[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:flex-end;padding:2em 0}"]}),o})()}];let Q=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[v.Bz.forChild(U),v.Bz]}),o})();var w=a(9923),V=a(9201),B=a(520);let L=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[p.ez,Q,w.v,V.V,r.u5,r.UX,B.JF]}),o})()}}]);